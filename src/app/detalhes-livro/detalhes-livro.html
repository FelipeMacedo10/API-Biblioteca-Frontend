<h1>Detalhes do livro</h1>

@if (carregando) {
  <div>Carregando informações do livro...</div>
}

@if (erro) {
  <div style="color: #b00020;">{{ erro }}</div>
}

@if (livro) {
  <div>
    <p><strong>Título:</strong> {{ livro.titulo }}</p>
    <p><strong>Autor:</strong> {{ livro.autor }}</p>
    <p><strong>Gênero:</strong> {{ livro.genero }}</p>
    <p><strong>Status:</strong> {{ livro.disponivel ? 'Disponível' : 'Indisponível' }}</p>

    <hr />

    <h2>Reservar livro</h2>

    <form [formGroup]="formReserva" (ngSubmit)="fazerReserva()">
      <div>
        <label for="data_retirada">Data de Retirada</label>
        <input type="date" id="data_retirada" formControlName="data_retirada" />
        
        @if (formReserva.get('data_retirada')?.invalid && formReserva.get('data_retirada')?.touched) {
          <div>
            <small>Data de retirada é obrigatória e não pode ser no passado.</small>
          </div>
        }
      </div>

      @if (usuarioLogado) {
        <button type="submit" [disabled]="formReserva.invalid">
          Fazer reserva
        </button>
      } @else { 
        <div style="color: #b00020; margin-top: 8px;">
          Você precisa estar logado para reservar.
        </div>
      }     
    </form>

    @if (mensagemSucesso) {
      <div style="color: #2e7d32; margin-top: 8px;">{{ mensagemSucesso }}</div>
    }
  </div>
}